# Exercices : Requêtes avancées


## Exercice 1 : Opérateurs de comparaison

### 1.1 - Produits par tranche de prix
Trouvez tous les produits dont le prix est compris entre 50 et 200 euros.
### 1.2 - Stock faible
Trouvez tous les produits actifs dont le stock est inférieur à 50 unités.
### 1.3 - Catégories multiples
Trouvez toutes les catégories qui n'ont pas de catégorie parente (catégories principales).
### 1.4 - Produits récents
Trouvez tous les produits créés après le 1er septembre 2024.
### 1.5 - Prix spécifiques
Trouvez tous les produits dont le prix est différent de 26.99 euros.

---

## Exercice 2 : Opérateurs logiques

### 2.1 - Produits en stock ET actifs
Trouvez tous les produits qui sont actifs ET qui ont un stock supérieur à 100.
### 2.2 - Produits informatique OU électronique
Trouvez tous les produits qui appartiennent soit à la catégorie "Informatique" (ObjectId `650a11111111111111110002`) soit à la catégorie "Électronique" (ObjectId `650a11111111111111110001`).
### 2.3 - Commandes en attente OU en traitement
Trouvez toutes les commandes dont le statut est "pending" OU "processing".
### 2.4 - Produits premium
Trouvez tous les produits qui ont un prix supérieur à 500 euros ET une note moyenne supérieure ou égale à 4.5.
### 2.5 - Clients sans commande récente
Trouvez tous les clients qui ont un total de commandes inférieur à 2 OU qui n'ont pas de date de dernière commande renseignée.
### 2.6 - Combinaison complexe
Trouvez tous les produits qui :
- Ont un prix entre 100 et 1000 euros
- ET sont soit de marque "Dell" soit de marque "Samsung"

---

## Exercice 3 : Recherche dans les tableaux

### 3.1 - Produits avec tag spécifique
Trouvez tous les produits contenant le tag "gaming".
### 3.2 - Produits avec plusieurs tags
Trouvez tous les produits contenant à la fois les tags "smartphone" et "android".
### 3.3 - Produits avec exactement 3 tags
Trouvez tous les produits qui ont exactement 3 tags.
### 3.4 - Produits avec plusieurs images
Trouvez tous les produits qui ont plus de 2 images.
### 3.5 - Clients avec plusieurs adresses
Trouvez tous les clients qui ont exactement 2 adresses enregistrées.
### 3.6 - Produits avec avis vérifiés
Trouvez tous les produits qui ont au moins un avis avec `verified_purchase: true` ET un rating de 5.
### 3.7 - Commandes avec articles multiples
Trouvez toutes les commandes qui contiennent plus d'un article (plusieurs éléments dans le tableau `items`).

---

## Exercice 4 : Recherche dans les sous-documents

### 4.1 - Produits Dell
Trouvez tous les produits de la marque "Dell" (champ `specifications.brand`).
### 4.2 - Smartphones AMOLED
Trouvez tous les produits dont l'écran est de type "AMOLED" (recherche dans `specifications.screen`).
### 4.3 - Clients à Paris
Trouvez tous les clients ayant au moins une adresse à Paris.
### 4.4 - Commandes payées par carte bancaire
Trouvez toutes les commandes dont le mode de paiement est "credit_card".
### 4.5 - Produits avec variante spécifique
Trouvez tous les produits qui ont une variante de couleur "Noir" ET de stockage "512GB".
### 4.6 - Note moyenne élevée
Trouvez tous les produits dont la note moyenne (`rating.average`) est supérieure ou égale à 4.5 ET qui ont reçu au moins 2 avis (`rating.count`).
### 4.7 - Livraison gratuite
Trouvez toutes les commandes dont les frais de livraison (`pricing.shipping`) sont inférieurs à 5 euros.
### 4.8 - Adresses avec code postal parisien
Trouvez tous les clients ayant une adresse dont le code postal commence par "75" (Paris).

---

## Exercice 5 : Requêtes complexes combinées

### 5.1 - Produits populaires en stock
Trouvez tous les produits qui :
- Sont actifs
- Ont un stock supérieur à 50
- Ont une note moyenne supérieure ou égale à 4
- Ont un prix inférieur à 500 euros
### 5.2 - Commandes importantes
Trouvez toutes les commandes qui :
- Ont un total (`pricing.total`) supérieur à 150 euros
- ET dont le statut est "delivered" OU "shipped"
- ET qui ont été passées après le 1er octobre 2024
### 5.3 - Clients VIP
Trouvez tous les clients qui :
- Ont effectué plus de 2 commandes
- OU ont dépensé plus de 1000 euros au total
- ET sont membres depuis avant le 1er octobre 2024
### 5.4 - Produits avec avis positifs récents
Trouvez tous les produits qui ont au moins un avis avec :
- Un rating de 5
- Une date postérieure au 1er octobre 2024
- Un achat vérifié
### 5.5 - Commandes urgentes non traitées
Trouvez toutes les commandes qui :
- Ont le champ `urgent: true`
- ET dont le statut est "pending"
- ET dont le paiement n'est pas encore confirmé (`payment.status` différent de "paid")
### 5.6 - Produits technologiques abordables
Trouvez tous les produits qui :
- Appartiennent aux catégories "Informatique" (ObjectId `650a11111111111111110002`) OU "Smartphones" (ObjectId `650a11111111111111110003`)
- ET ont un prix inférieur à 200 euros
- ET contiennent le tag "rgb" OU "android"
- ET sont actifs
### 5.7 - Commandes avec réduction
Trouvez toutes les commandes qui :
- Ont une réduction (`pricing.discount`) supérieure à 0
- ET qui ont utilisé un code promo (champ `couponCode` existe)
- ET dont le total est supérieur à 100 euros
### 5.8 - Produits avec variantes en rupture
Trouvez tous les produits qui ont au moins une variante avec un stock égal à 0.
### 5.9 - Clients actifs de grandes villes
Trouvez tous les clients qui :
- Habitent à "Paris", "Lyon" ou "Marseille"
- ET ne sont pas marqués comme supprimés (`deleted: false` ou champ absent)
- ET ont effectué au moins une commande
### 5.10 - Analyse avancée des commandes
Trouvez toutes les commandes qui :
- Contiennent au moins un article de catégorie "Informatique"
- ET ont été expédiées (champ `shipping.trackingNumber` existe)
- ET dont l'adresse de livraison est en dehors de Paris (code postal ne commence PAS par "75")